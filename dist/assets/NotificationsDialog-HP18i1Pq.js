var t=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(o,a,n)=>a in o?t(o,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[a]=n,c=(t,o)=>{for(var a in o||(o={}))e.call(o,a)&&s(t,a,o[a]);if(n)for(var a of n(o))i.call(o,a)&&s(t,a,o[a]);return t},d=(t,n)=>o(t,a(n));import{j as m}from"./ui-hXJWsX_c.js";import{u as l,D as p,a as r,b as x,d as f,e as g,C as D,B as N,U as v,f as u,g as h}from"./index-DJEXThLD.js";import{r as j}from"./vendor-Bzk19QnB.js";import"./supabase-CtIXft2S.js";const B=({open:t,onOpenChange:o})=>{const{items:a,markAllRead:n}=l(),[e,i]=j.useState([]);j.useEffect(()=>{const t=()=>{try{const t=localStorage.getItem("vp_notifications"),o=t?JSON.parse(t):[];i(o)}catch(t){console.error("Error loading verification notifications:",t)}};t();const o=()=>t();return window.addEventListener("notifications-updated",o),()=>window.removeEventListener("notifications-updated",o)},[]);const s=[...a.map(t=>d(c({},t),{type:"system"})),...e.filter(t=>!t.read).map(t=>d(c({},t),{type:"verification"}))].sort((t,o)=>new Date(o.createdAt||o.timestamp).getTime()-new Date(t.createdAt||t.timestamp).getTime());return m.jsx(p,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:56:4","data-lov-name":"Dialog","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"56","data-component-file":"NotificationsDialog.tsx","data-component-name":"Dialog","data-component-content":"%7B%7D",open:t,onOpenChange:o,children:m.jsxs(r,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:57:6","data-lov-name":"DialogContent","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"57","data-component-file":"NotificationsDialog.tsx","data-component-name":"DialogContent","data-component-content":"%7B%22className%22%3A%22max-w-md%22%7D",className:"max-w-md",children:[m.jsxs(x,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:58:8","data-lov-name":"DialogHeader","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"58","data-component-file":"NotificationsDialog.tsx","data-component-name":"DialogHeader","data-component-content":"%7B%7D",children:[m.jsx(f,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:59:10","data-lov-name":"DialogTitle","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"59","data-component-file":"NotificationsDialog.tsx","data-component-name":"DialogTitle","data-component-content":"%7B%22text%22%3A%22Notifications%22%2C%22className%22%3A%22text-foreground%22%7D",className:"text-foreground",children:"Notifications"}),m.jsx(g,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:60:10","data-lov-name":"DialogDescription","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"60","data-component-file":"NotificationsDialog.tsx","data-component-name":"DialogDescription","data-component-content":"%7B%22text%22%3A%22Recent%20updates%22%2C%22className%22%3A%22text-muted-foreground%22%7D",className:"text-muted-foreground",children:"Recent updates"})]}),m.jsxs("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:62:8","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"62","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%20max-h-96%20overflow-y-auto%22%7D",className:"space-y-3 max-h-96 overflow-y-auto",children:[0===s.length&&m.jsx("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:64:12","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"64","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22text%22%3A%22No%20new%20notifications.%22%2C%22className%22%3A%22text-sm%20text-muted-foreground%22%7D",className:"text-sm text-muted-foreground",children:"No new notifications."}),s.map(t=>m.jsxs("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:67:12","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"67","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22glass-card%20p-3%20flex%20items-start%20gap-3%22%7D",className:"glass-card p-3 flex items-start gap-3",children:["verification"===t.type?m.jsx(D,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:69:16","data-lov-name":"CheckCircle2","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"69","data-component-file":"NotificationsDialog.tsx","data-component-name":"CheckCircle2","data-component-content":"%7B%22className%22%3A%22text-green-500%22%7D",size:14,className:"text-green-500"}):m.jsx(N,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:71:16","data-lov-name":"Bell","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"71","data-component-file":"NotificationsDialog.tsx","data-component-name":"Bell","data-component-content":"%7B%7D",size:14,className:"success"===t.kind?"text-status-confirmed":"warning"===t.kind?"text-status-pending":"text-foreground"}),m.jsx("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:73:14","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"73","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",className:"flex-1",children:"verification"===t.type?m.jsxs("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:75:18","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"75","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%7D",children:[m.jsx("p",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:76:20","data-lov-name":"p","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"76","data-component-file":"NotificationsDialog.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-foreground%20font-medium%22%7D",className:"text-sm text-foreground font-medium",children:t.title}),m.jsx("p",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:77:20","data-lov-name":"p","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"77","data-component-file":"NotificationsDialog.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-muted-foreground%20mt-1%22%7D",className:"text-sm text-muted-foreground mt-1",children:t.message}),t.data&&m.jsxs("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:79:22","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"79","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-2%20space-y-1%22%7D",className:"mt-2 space-y-1",children:[m.jsxs("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:80:24","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"80","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-xs%20text-muted-foreground%22%7D",className:"flex items-center gap-2 text-xs text-muted-foreground",children:[m.jsx(v,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:81:26","data-lov-name":"User","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"81","data-component-file":"NotificationsDialog.tsx","data-component-name":"User","data-component-content":"%7B%7D",size:12}),m.jsxs("span",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:82:26","data-lov-name":"span","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"82","data-component-file":"NotificationsDialog.tsx","data-component-name":"span","data-component-content":"%7B%22text%22%3A%22Verified%20by%3A%22%7D",children:["Verified by: ",t.data.verifiedBy]})]}),m.jsxs("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:84:24","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"84","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-xs%20text-muted-foreground%22%7D",className:"flex items-center gap-2 text-xs text-muted-foreground",children:[m.jsx(u,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:85:26","data-lov-name":"Clock","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"85","data-component-file":"NotificationsDialog.tsx","data-component-name":"Clock","data-component-content":"%7B%7D",size:12}),m.jsxs("span",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:86:26","data-lov-name":"span","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"86","data-component-file":"NotificationsDialog.tsx","data-component-name":"span","data-component-content":"%7B%22text%22%3A%22h%20worked%22%7D",children:[t.data.verifiedHours,"h worked"]})]}),m.jsxs("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:88:24","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"88","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-xs%20text-muted-foreground%22%7D",className:"flex items-center gap-2 text-xs text-muted-foreground",children:[m.jsx(h,{"data-lov-id":"src\\components\\NotificationsDialog.tsx:89:26","data-lov-name":"Star","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"89","data-component-file":"NotificationsDialog.tsx","data-component-name":"Star","data-component-content":"%7B%7D",size:12}),m.jsxs("span",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:90:26","data-lov-name":"span","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"90","data-component-file":"NotificationsDialog.tsx","data-component-name":"span","data-component-content":"%7B%22text%22%3A%22Rating%3A%20%2F5%20stars%22%7D",children:["Rating: ",t.data.starRating,"/5 stars"]})]})]}),m.jsx("p",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:94:20","data-lov-name":"p","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"94","data-component-file":"NotificationsDialog.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-%5B10px%5D%20text-muted-foreground%20mt-2%22%7D",className:"text-[10px] text-muted-foreground mt-2",children:new Date(t.timestamp).toLocaleString()}),m.jsx("button",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:95:20","data-lov-name":"button","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"95","data-component-file":"NotificationsDialog.tsx","data-component-name":"button","data-component-content":"%7B%22text%22%3A%22Mark%20as%20read%22%2C%22className%22%3A%22text-%5B10px%5D%20text-primary%20hover%3Aunderline%20mt-1%22%7D",onClick:()=>(t=>{try{const o=localStorage.getItem("vp_notifications"),a=(o?JSON.parse(o):[]).map(o=>o.id===t?d(c({},o),{read:!0}):o);localStorage.setItem("vp_notifications",JSON.stringify(a)),i(a)}catch(o){console.error("Error marking notification as read:",o)}})(t.id),className:"text-[10px] text-primary hover:underline mt-1",children:"Mark as read"})]}):m.jsxs("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:103:18","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"103","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%7D",children:[m.jsx("p",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:104:20","data-lov-name":"p","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"104","data-component-file":"NotificationsDialog.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-foreground%22%7D",className:"text-sm text-foreground",children:t.text}),m.jsx("p",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:105:20","data-lov-name":"p","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"105","data-component-file":"NotificationsDialog.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-%5B10px%5D%20text-muted-foreground%20mt-1%22%7D",className:"text-[10px] text-muted-foreground mt-1",children:new Date(t.createdAt).toLocaleString()})]})})]},t.id))]}),m.jsx("div",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:112:8","data-lov-name":"div","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"112","data-component-file":"NotificationsDialog.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22pt-2%22%7D",className:"pt-2",children:m.jsx("button",{"data-lov-id":"src\\components\\NotificationsDialog.tsx:113:10","data-lov-name":"button","data-component-path":"src\\components\\NotificationsDialog.tsx","data-component-line":"113","data-component-file":"NotificationsDialog.tsx","data-component-name":"button","data-component-content":"%7B%22text%22%3A%22Mark%20all%20as%20read%22%2C%22className%22%3A%22text-xs%20underline%20underline-offset-2%20text-muted-foreground%20hover%3Atext-foreground%22%7D",className:"text-xs underline underline-offset-2 text-muted-foreground hover:text-foreground",onClick:()=>n(),children:"Mark all as read"})})]})})};export{B as NotificationsDialog};
